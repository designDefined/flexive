import { filterUndefinedKeys } from "../utility/filter";
import { FlexiveProps } from "./props";

export const filterProps = <T extends FlexiveProps>(
  props: T,
): { flexive: FlexiveProps; rest: Omit<T, keyof FlexiveProps> } => {
  const {
    flex,
    inline,
    inlineFlex,
    block,
    f,
    grow,
    shrink,
    basis,
    colReverse,
    row,
    rowReverse,
    wrap,
    wrapReverse,
    nowrap,
    alignM,
    alignC,
    alignSelfM,
    alignSelfC,
    sizeM,
    maxM,
    minM,
    sizeC,
    maxC,
    minC,
    p,
    px,
    py,
    pt,
    pr,
    pb,
    pl,
    m,
    mx,
    my,
    mt,
    mr,
    mb,
    ml,
    g,
    gM,
    gC,
    over,
    overM,
    overC,
    hide,
    hideM,
    hideC,

    // utility style
    relative,
    static: _static,
    fixed,
    absolute,
    sticky,
    top,
    right,
    bottom,
    left,
    rad,

    // native style
    style: nativeStyle,

    // rest props
    ...rest
  } = props;

  return {
    flexive: filterUndefinedKeys({
      flex,
      inline,
      inlineFlex,
      block,
      f,
      grow,
      shrink,
      basis,
      colReverse,
      row,
      rowReverse,
      wrap,
      wrapReverse,
      nowrap,
      alignM,
      alignC,
      alignSelfM,
      alignSelfC,
      sizeM,
      maxM,
      minM,
      sizeC,
      maxC,
      minC,
      p,
      px,
      py,
      pt,
      pr,
      pb,
      pl,
      m,
      mx,
      my,
      mt,
      mr,
      mb,
      ml,
      g,
      gM,
      gC,
      over,
      overM,
      overC,
      hide,
      hideM,
      hideC,

      // utility style
      relative,
      static: _static,
      fixed,
      absolute,
      sticky,
      top,
      right,
      bottom,
      left,
      rad,

      // native style
      style: nativeStyle,
    }),
    rest,
  };
};
